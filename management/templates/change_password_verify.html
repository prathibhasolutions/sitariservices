{% extends "masteremployee.html" %}
{% block content %}
<div class="container mt-4">
    <h3>Change Password - Step 2: Verify OTP and Set New Password</h3>
    <form method="post">
        {% csrf_token %}

        {% if not otp_verified %}
        <div class="form-group">
            <label for="otp">Enter OTP</label>
            <input type="text" name="otp" id="otp" class="form-control" required autofocus>
        </div>
        <button type="submit" class="btn btn-primary">Verify OTP</button>
        {% else %}
        <p class="text-success">OTP Verified. Please set your new password.</p>
        <div class="form-group">
            <label for="new_password">New Password</label>
            <input type="password" name="new_password" id="new_password" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="confirm_password">Confirm New Password</label>
            <input type="password" name="confirm_password" id="confirm_password" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-success">Change Password</button>
        {% endif %}
    </form>
    {% for message in messages %}
    <div class="mt-3 alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
</div>
{% endblock %}
