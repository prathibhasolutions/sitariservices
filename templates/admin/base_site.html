{% extends "admin/base_site.html" %}
{% block extrahead %}
{{ block.super }}
<script>
// Print event tracking for audit log
function logPrintEvent() {
    fetch('/admin/auditlog/print-event/', {
        method: 'POST',
        headers: {
            'X-CSRFToken': (document.querySelector('[name=csrfmiddlewaretoken]') || {}).value || '',
        },
        credentials: 'same-origin'
    });
}
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
        logPrintEvent();
    }
});
window.onafterprint = function() {
    logPrintEvent();
};
</script>
{% endblock %}
